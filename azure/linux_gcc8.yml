pool:
  name: Hosted Ubuntu 1604

container: aeonengine/linux_build_environment:latest

steps:
- script: git submodule update --init
  displayName: 'Init submodules'
- script: mkdir build && cd build && cmake ../ -DCMAKE_INSTALL_PREFIX=$(pwd)/install -DAEON_COMPONENT_CLANG=OFF
  displayName: 'Bootstrap'
- script: cd build && make -j2
  displayName: 'Build'
- script: cd build && ctest
  displayName: 'Test'
